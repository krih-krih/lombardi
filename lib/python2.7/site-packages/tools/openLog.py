#!/usr/bin/python
import sys
import logging

def openLog(log_name, log_fn, datestamp=False, console_log=True):
    '''
    Returns an appropriate logger object.

    console_log determines whether or not the log file content will be
    repeated to the console.
    '''
    from datetime import datetime

    logger = logging.getLogger(log_name)
    logger.setLevel(logging.INFO)
    #formatter = logging.Formatter('%(asctime)s - %(module)s - line:%(lineno)d - %(name)s - %(levelname)s - %(message)s')        
    formatter = logging.Formatter("%(name)s - line %(lineno)d - %(asctime)s - %(levelname)s - %(message)s",
                                  "%Y-%m-%d %H:%M")
    if datestamp:
        log_fn = log_fn + '_' + str(datetime.now()).replace(' ', '')
    log_fh = logging.FileHandler(log_fn)
    log_fh.setFormatter(formatter)
    logger.addHandler(log_fh)

    if console_log == True:
        ch = logging.StreamHandler()
        ch.setLevel(logging.INFO)
        ch.setFormatter(formatter)
        logger.addHandler(ch)

    return logger
